## API Endpoints - Kanban Board Project

| Method             | Endpoint                                                             | Description                              | Request Body (Example)                                                                                  | Response (Example)                                                                   | Status Codes       | Auth Required |
| :----------------- | :------------------------------------------------------------------- | :--------------------------------------- | :------------------------------------------------------------------------------------------------------ | :----------------------------------------------------------------------------------- | :----------------- | :------------ |
| **Authentication** |                                                                      |                                          |                                                                                                         |                                                                                      |                    |               |
| `POST`             | `/auth/register`                                                     | Register a new user                      | `{ username: "john.doe", password: "securePassword" }`                                                  | `{ message: "User registered successfully" }`                                        | 201, 400           | No            |
| `POST`             | `/auth/login`                                                        | Login an existing user                   | `{ username: "john.doe", password: "securePassword" }`                                                  | `{ token: "JWT_TOKEN" }`                                                             | 200, 401           | No            |
| `POST`             | `/auth/guest`                                                        | Create a guest session                   | None                                                                                                    | `{ token: "GUEST_JWT_TOKEN", guestId: "guest-123" }`                                 | 201                | No            |
| `POST`             | `/auth/convert-guest`                                                | Convert guest account to registered user | `{ guestId: "guest-123", username: "john.doe", password: "securePassword", email: "john@example.com" }` | `{ message: "Account converted successfully", token: "NEW_JWT_TOKEN", userId: 456 }` | 201, 400, 404, 409 |
| **Boards**         |                                                                      |                                          |                                                                                                         |                                                                                      |                    |               |
| `GET`              | `/boards`                                                            | Get all boards                           | None                                                                                                    | `[ { id: 1, name: "Sprint 1" }, { id: 2, name: "New Feature" } ]`                    | 200, 401           | Yes           |
| `GET`              | `/boards?userId=123`                                                 | Get boards for specific user             | None                                                                                                    | `[ { id: 1, name: "Sprint 1" }, { id: 2, name: "New Feature" } ]`                    | 200, 401           | Yes           |
| `GET`              | `/boards/guest/{guestId}`                                            | Get boards for a guest user              | None                                                                                                    | `[ { id: 1, name: "Guest Board" } ]`                                                 | 200, 404           | No\*          |
| `POST`             | `/boards`                                                            | Create a new board                       | `{ name: "New Board" }`                                                                                 | `{ id: 3, name: "My Board" }`                                                        | 201, 400, 401      | Yes           |
| `POST`             | `/boards/guest/{guestId}`                                            | Create a board for guest                 | `{ name: "Guest Project" }`                                                                             | `{ id: 5, name: "Guest Project" }`                                                   | 201, 400, 404      | No\*          |
| `GET`              | `/boards/{boardId}`                                                  | Get a specific board                     | None                                                                                                    | `{ id: 1, name: "Sprint 1" }`                                                        | 200, 401, 404      | Yes\*\*       |
| `PUT`              | `/boards/{boardId}`                                                  | Update a specific board                  | `{ name: "Sprint 1 - Revised" }`                                                                        | `{ id: 1, name: "Sprint 1 - Revised" }`                                              | 200, 400, 401, 404 | Yes\*\*       |
| `DELETE`           | `/boards/{boardId}`                                                  | Delete a specific board                  | None                                                                                                    | `204 No Content`                                                                     | 204, 401, 404      | Yes\*\*       |
| **Lists**          |                                                                      |                                          |                                                                                                         |                                                                                      |                    |               |
| `GET`              | `/boards/{boardId}/lists`                                            | Get all lists for a board                | None                                                                                                    | `[ { id: 1, name: "To Do" }, { id: 2, name: "In Progress" } ]`                       | 200, 401, 404      | Yes\*\*       |
| `POST`             | `/boards/{boardId}/lists`                                            | Create a new list within a board         | `{ name: "Backlog" }`                                                                                   | `{ id: 1, name: "Backlog" }`                                                         | 201, 400, 401, 404 | Yes\*\*       |
| `GET`              | `/boards/{boardId}/lists/{listId}`                                   | Get a specific list within a board       | None                                                                                                    | `{ id: 1, name: "To Do" }`                                                           | 200, 401, 404      | Yes\*\*       |
| `PUT`              | `/boards/{boardId}/lists/{listId}`                                   | Update a specific list within a board    | `{ name: "Daily Standup" }`                                                                             | `{ id: 1, name: "Daily Standup" }`                                                   | 200, 400, 401, 404 | Yes\*\*       |
| `DELETE`           | `/boards/{boardId}/lists/{listId}`                                   | Delete a specific list within a board    | None                                                                                                    | `204 No Content`                                                                     | 204, 401, 404      | Yes\*\*       |
| **Tasks**          |                                                                      |                                          |                                                                                                         |                                                                                      |                    |               |
| `GET`              | `/boards/{boardId}/lists/{listId}/tasks`                             | Get all tasks in a list                  | None                                                                                                    | `[ { id: 1, name: "Fix bug" }, { id: 2, name: "Add feature" } ]`                     | 200, 401, 404      | Yes\*\*       |
| `GET`              | `/boards/{boardId}/lists/{listId}/tasks?status=active&sort=priority` | Get filtered tasks                       | None                                                                                                    | `[ { id: 1, name: "Fix bug", priority: "high" } ]`                                   | 200, 401, 404      | Yes\*\*       |
| `POST`             | `/boards/{boardId}/lists/{listId}/tasks`                             | Create a new task linked to a list       | `{ name: "Implement Feature", description: "...", assignedTo: "john.doe" }`                             | `{ id: 4, name: "Implement Feature" }`                                               | 201, 400, 401, 404 | Yes\*\*       |
| `GET`              | `/tasks/{taskId}`                                                    | Get a specific task                      | None                                                                                                    | `{ id: 4, name: "Implement Feature" }`                                               | 200, 401, 404      | Yes\*\*       |
| `PUT`              | `/tasks/{taskId}`                                                    | Update a specific task                   | `{ name: "Implemented Feature", status: "done" }`                                                       | `{ id: 4, name: "Implemented Feature" }`                                             | 200, 400, 401, 404 | Yes\*\*       |
| `PATCH`            | `/tasks/{taskId}`                                                    | Partial update of a task                 | `{ status: "done" }`                                                                                    | `{ id: 4, status: "done" }`                                                          | 200, 400, 401, 404 | Yes\*\*       |
| `PATCH`            | `/tasks/{taskId}/move`                                               | Move a task to different list            | `{ destinationListId: 2 }`                                                                              | `{ id: 4, listId: 2 }`                                                               | 200, 400, 401, 404 | Yes\*\*       |
| `DELETE`           | `/tasks/{taskId}`                                                    | Delete a specific task                   | None                                                                                                    | `204 No Content`                                                                     | 204, 401, 404      | Yes\*\*       |

**Notes & Considerations:**

-   **Authentication**:

    -   Regular authentication endpoints require no prior authentication
    -   Most endpoints require authentication via `Authorization: Bearer JWT_TOKEN` in request headers
    -   No\* - Guest endpoints require the correct guestId in the URL path (can be validated for security)
    -   Yes\*\* - These endpoints require either regular authentication OR a valid guest token with matching guestId for guest-created resources

-   **Guest Session**:

    -   Guest sessions receive a temporary JWT with limited permissions
    -   Guest data is stored with a unique `guestId`
    -   Guest data may have an expiration policy (e.g., deleted after 30 days of inactivity)
    -   Guests can convert to registered users with an additional endpoint (not shown) that would transfer ownership

-   **Error Responses**:

    -   `400 Bad Request`: `{ error: "Invalid input data", details: "Name is required" }`
    -   `401 Unauthorized`: `{ error: "Authentication required" }`
    -   `404 Not Found`: `{ error: "Resource not found" }`

-   **Project Structure**:
    -   **`auth.controller.js` & `auth.routes.js`**: Handles registration, login, and guest sessions (using JWT).
    -   **`db.js` & `swagger.js`**: Configuration files for your database and Swagger documentation.
    -   **`base.service.js`**: Contains reusable services for tasks (creating, updating, deleting tasks, etc.).
    -   **`jwt.utils.js`**: Used to generate and verify JWT tokens (including guest tokens).
    -   **`user.model.js`**: Defines the structure of the User model (would need to be extended for guest users).
    -   **`errorHandler.js`**: Middleware for handling errors.
    -   **Swagger integration**: API documentation generated based on these routes.
    -   **Model-driven approach**: Your model defines data types and relationships (user, board, list, task).
